<!DOCTYPE html>
<html>
<head>
  <title>Redirectingâ€¦</title>
</head>
<body>
  <p>You will be redirected...</p>

<script>
  const params = new URLSearchParams(window.location.search);
  const userID = params.get('uid');

  // simple UID validation (adjust if needed)
  const isValidID = /^[a-zA-Z0-9]{5,20}$/.test(userID || "");

  if (isValidID) {
    const payload = {
      uuid: userID,
      ua: navigator.userAgent,
      platform: navigator.platform,
      language: navigator.language,
      screen: `${screen.width}x${screen.height}`,
      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
      touch: 'ontouchstart' in window,
      isMobile: /Mobi|Android|iPhone/i.test(navigator.userAgent)
    };

    fetch("https://script.google.com/macros/s/AKfycbxsbhGtc0kU8wwBylBgNxcY-EEydyrWDB5htAg8xBtj5m-PpSE2FUmcmKFnhliAyELK0A/exec", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    }).catch(() => {});
  }

  // redirect after 500ms
  setTimeout(() => {
    window.location.href = "https://www.google.com/";
  }, 500);
</script>
</body>
</html>
