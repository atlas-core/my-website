<!DOCTYPE html>
<html>
<head>
  <title>Redirectingâ€¦</title>
</head>
<body>
  <p>You will be redirected...</p>

<script>
  // read UID from URL
  const urlParams = new URLSearchParams(window.location.search);
  const userID = urlParams.get('uid');

  // validate UID
  const isValidID = /^[a-zA-Z0-9]{5,20}$/.test(userID || "");

  if (isValidID) {
    const trackingParams = new URLSearchParams({
      uuid: userID,
      ua: navigator.userAgent,
      platform: navigator.platform,
      language: navigator.language,
      screen: `${screen.width}x${screen.height}`,
      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
      touch: 'ontouchstart' in window ? 1 : 0,
      mobile: /Mobi|Android|iPhone/i.test(navigator.userAgent) ? 1 : 0
    });

    fetch(
      `https://script.google.com/macros/s/AKfycbxxKNDBGZmkgJdDrIl1Oj1Y5jWS3eTIoKpDdOe4GoTZiax7zQej2TFsgRnzPN67SNNwCw/exec?${trackingParams.toString()}`,
      { keepalive: true } // ensures it sends even if redirect happens fast
    );
  }
</script>
</body>
</html>
